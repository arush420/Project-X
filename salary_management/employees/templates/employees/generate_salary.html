{% extends 'base.html' %}

{% block title %}Generate Salary{% endblock %}

{% block content %}
    <h1>Generate Salary</h1>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <form method="POST">
        {% csrf_token %}
        <label for="month">Select Month:</label>
        <select name="month" id="month" required>
            <option value="">Select Month</option>
            {% for value, name in months %}
                <option value="{{ value }}">{{ name }}</option>
            {% endfor %}
        </select>

        <label for="year">Select Year:</label>
        <input type="number" name="year" value="{{ current_year }}" required>

        <label for="days_in_month">Number of Days in Month:</label>
        <input type="number" name="days_in_month" required>

        <table>
            <thead>
                <tr>
                    <th>Employee Code</th>
                    <th>Employee Name</th>
                    <th>Days Worked</th>
                    <th>Advance Deduction</th>
                </tr>
            </thead>
            <tbody>
                {% for employee in employees %}
                <tr>
                    <td>{{ employee.employee_code }}</td>
                    <td>{{ employee.name }}</td>
                    <td><input type="number" name="days_worked_{{ employee.id }}" value="0" required></td>
                    <td><input type="number" name="advance_{{ employee.id }}" value="0"></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <button type="submit">Generate Salary</button>
    </form>
{% endblock %}
